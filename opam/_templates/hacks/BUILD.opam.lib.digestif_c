## original: $(OPAM_SWITCH_PREFIX)/lib/digestif/META

load(
    "@obazl_rules_ocaml//ocaml:rules.bzl",
    "ocaml_import"
)

ocaml_import(
    name = "c",
    version = "0.9.0",
    archive = select({
        "@ocaml//mode:bytecode": [
            "//:_lib/digestif/c/digestif_c.cma",
        ],

        "@ocaml//mode:native": [
            "//:_lib/digestif/c/digestif_c.cmxa",
            "//:_lib/digestif/c/digestif_c.a",
        ],

    }),
    deps = [
        ## "@ocaml//lib/digestif_signature",
        "@ocaml//lib/bigarray-compat",
        "@ocaml//lib/digestif",
        "@ocaml//lib/digestif/rakia",
        "@ocaml//lib/eqaf",
        "@ocaml//lib/stdlib-shims",
    ],
    visibility = ["//visibility:public"]
)

ocaml_import(
    name = "plugin",
    plugin = select({
        "@ocaml//mode:bytecode": [
            "//:_lib/digestif/c/digestif_c.cma",
        ],

        "@ocaml//mode:native": [
            "//:_lib/digestif/c/digestif_c.cmxs",
        ],

    }),
    deps = [
        "@ocaml//lib/bigarray-compat",
        "@ocaml//lib/digestif",
        "@ocaml//lib/digestif/rakia",
        "@ocaml//lib/eqaf",
        "@ocaml//lib/stdlib-shims",
    ],
    visibility = ["//visibility:public"]
)
